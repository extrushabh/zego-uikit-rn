{"version":3,"names":["MaskViewDefault","props","userInfo","userName","styles","defaultMaskContainer","defaultMaskNameLabelContainer","defaultMaskNameLabel","ZegoVideoView","userID","roomID","audioViewBackgroudColor","audioViewBackgroudImage","showSoundWave","useVideoViewAspectFill","foregroundBuilder","setUserInfo","useState","isCameraOn","setIsCameraOn","useEffect","user","ZegoUIKitInternal","getUser","isCameraDeviceOn","callbackID","String","onSDKConnected","onUserInfoUpdate","info","onRoomStateChanged","reason","errorCode","extendedData","isRoomConnected","container","videoContainer","mask","StyleSheet","create","flex","width","height","position","zIndex","backgroundColor","opacity","alignSelf","paddingLeft","paddingRight","paddingBottom","paddingTop","borderRadius","bottom","right","color","fontSize"],"sources":["index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { View, StyleSheet, Text } from \"react-native\";\nimport Delegate from \"react-delegate-component\";\nimport AudioFrame from \"./AudioFrame\";\nimport VideoFrame from \"./VideoFrame\";\nimport ZegoUIKitInternal from \"../../internal/ZegoUIKitInternal\";\n\n\nfunction MaskViewDefault(props) {\n    const { userInfo } = props;\n    const { userName = '' } = userInfo;\n    return (\n        <View style={styles.defaultMaskContainer}>\n            <View style={styles.defaultMaskNameLabelContainer}>\n                <Text style={styles.defaultMaskNameLabel}>{userName}</Text>\n            </View>\n        </View>\n    );\n}\n\nexport default function ZegoVideoView(props) {\n    const {\n        userID,\n        roomID,\n        audioViewBackgroudColor,\n        audioViewBackgroudImage,\n        showSoundWave = true,\n        useVideoViewAspectFill = false,\n        foregroundBuilder\n    } = props;\n\n    const [userInfo, setUserInfo] = useState({});\n    const [isCameraOn, setIsCameraOn] = useState(true);\n\n\n    useEffect(() => {\n        const user = ZegoUIKitInternal.getUser(userID);\n        if (user) {\n            setUserInfo(user);\n            setIsCameraOn(user.isCameraDeviceOn);\n        }\n    }, [])\n\n    useEffect(() => {\n        const callbackID = 'ZegoVideoView' + String(userID);\n\n        ZegoUIKitInternal.onSDKConnected(callbackID, () => {\n            const user = ZegoUIKitInternal.getUser(userID);\n            if (user) {\n                setUserInfo(user);\n                setIsCameraOn(user.isCameraDeviceOn);\n            }\n        });\n        ZegoUIKitInternal.onUserInfoUpdate(callbackID,\n            (info) => {\n                if (info.userID == userID) {\n                    setIsCameraOn(info.isCameraDeviceOn);\n                    setUserInfo(info);\n                }\n            });\n        ZegoUIKitInternal.onRoomStateChanged(callbackID,\n            (reason, errorCode, extendedData) => {\n                if (ZegoUIKitInternal.isRoomConnected()) {\n                    const user = ZegoUIKitInternal.getUser(userID);\n                    if (user) {\n                        setIsCameraOn(user.isCameraDeviceOn);\n                    }\n                }\n            });\n        return () => {\n            ZegoUIKitInternal.onSDKConnected(callbackID);\n            ZegoUIKitInternal.onUserInfoUpdate(callbackID);\n            ZegoUIKitInternal.onRoomStateChanged(callbackID);\n        }\n    }, [])\n    return (\n        <View style={styles.container}>\n            <VideoFrame\n                style={styles.videoContainer}\n                userID={userID}\n                roomID={roomID}\n                fillMode={useVideoViewAspectFill ? 1 : 0} // 1:AspectFill, 0:AspectFit\n            >\n                {!isCameraOn ? <AudioFrame\n                    userInfo={userInfo}\n                    showSoundWave={showSoundWave}\n                    audioViewBackgroudColor={audioViewBackgroudColor}\n                    audioViewBackgroudImage={audioViewBackgroudImage}\n                /> : null}\n            </VideoFrame>\n\n            <Delegate\n                style={styles.mask}\n                to={foregroundBuilder}\n                default={MaskViewDefault}\n                props={{ userInfo }}\n            />\n        </View>\n    );\n}\n\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        width: '100%',\n        height: '100%',\n        position: 'absolute',\n    },\n    videoContainer: {\n        flex: 1,\n        width: '100%',\n        height: '100%',\n        zIndex: 1,\n    },\n    mask: {\n        flex: 1,\n        width: '100%',\n        height: '100%',\n        position: 'absolute',\n        zIndex: 2,\n    },\n    defaultMaskContainer: {\n        flex: 1,\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n    },\n    defaultMaskNameLabelContainer: {\n        flex: 1,\n        backgroundColor: '#2A2A2A',\n        opacity: 0.5,\n        position: 'absolute',\n        alignSelf: 'center',\n        paddingLeft: 5,\n        paddingRight: 5,\n        paddingBottom: 3,\n        paddingTop: 3,\n        borderRadius: 6,\n        bottom: 5,\n        right: 5\n    },\n    defaultMaskNameLabel: {\n        flex: 1,\n        color: '#FFFFFF',\n        fontSize: 12\n    }\n});"],"mappings":"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"}