{"version":3,"names":["ZegoInRoomMessageView","props","listRef","useRef","messageList","setMessageList","useState","refreshMessage","arr","ZegoUIKitInternal","getInRoomMessages","useEffect","callbackID","String","Math","floor","random","onInRoomMessageReceived","onInRoomMessageSent","error","messageID","current","scrollToEnd","item","styles","messageContainer","nameLabel","sender","userName","messageLabel","message","StyleSheet","create","alignSelf","backgroundColor","borderRadius","flexDirection","justifyContent","alignItems","marginTop","paddingTop","paddingBottom","paddingRight","paddingLeft","color","fontSize","marginLeft"],"sources":["ZegoInRoomMessageView.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { FlatList, Text, StyleSheet, View } from 'react-native';\nimport ZegoUIKitInternal from '../internal/ZegoUIKitInternal';\n\nexport default function ZegoInRoomMessageView(props) {\n  const listRef = useRef(null);\n  const [messageList, setMessageList] = useState([]);\n\n  const refreshMessage = () => {\n    // setTimeOut(()=>null)\n    // Update list like this will cause rerender\n    setMessageList((arr) => [...ZegoUIKitInternal.getInRoomMessages()]);\n  };\n  useEffect(() => {\n    refreshMessage();\n  }, []);\n  useEffect(() => {\n    const callbackID =\n      'ZegoInRoomMessageView' + String(Math.floor(Math.random() * 10000));\n    ZegoUIKitInternal.onInRoomMessageReceived(callbackID, (messageList) => {\n      refreshMessage();\n    });\n    ZegoUIKitInternal.onInRoomMessageSent(callbackID, (error, messageID) => {\n      refreshMessage();\n    });\n\n    return () => {\n      ZegoUIKitInternal.onInRoomMessageReceived(callbackID);\n      ZegoUIKitInternal.onInRoomMessageSent(callbackID);\n    };\n  }, []);\n  return (\n    <FlatList\n      ref={listRef}\n      data={messageList}\n      // https://stackoverflow.com/questions/46304677/scrolltoend-after-update-data-for-flatlist\n      onContentSizeChange={() => listRef.current.scrollToEnd()}\n      renderItem={({ item }) => {\n        return (\n          <View style={styles.messageContainer}>\n            <Text style={styles.nameLabel}>\n              {item.sender.userName}\n              <Text style={styles.messageLabel}> {item.message}</Text>\n            </Text>\n          </View>\n        );\n      }}\n    />\n  );\n}\n\nconst styles = StyleSheet.create({\n  messageContainer: {\n    alignSelf: 'flex-start',\n    backgroundColor: 'rgba(1, 7, 18, 0.3000)',\n    borderRadius: 13,\n    flexDirection: 'row',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    marginTop: 4,\n    paddingTop: 5,\n    paddingBottom: 5,\n    paddingRight: 10,\n    paddingLeft: 10,\n  },\n  nameLabel: {\n    color: '#8BE7FF',\n    fontSize: 13,\n    // marginLeft: 10\n  },\n  messageLabel: {\n    color: 'white',\n    fontSize: 13,\n    marginLeft: 5,\n  },\n});\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;AAEe,SAASA,qBAAT,CAA+BC,KAA/B,EAAsC;EACnD,MAAMC,OAAO,GAAG,IAAAC,aAAA,EAAO,IAAP,CAAhB;EACA,MAAM,CAACC,WAAD,EAAcC,cAAd,IAAgC,IAAAC,eAAA,EAAS,EAAT,CAAtC;;EAEA,MAAMC,cAAc,GAAG,MAAM;IAC3B;IACA;IACAF,cAAc,CAAEG,GAAD,IAAS,CAAC,GAAGC,0BAAA,CAAkBC,iBAAlB,EAAJ,CAAV,CAAd;EACD,CAJD;;EAKA,IAAAC,gBAAA,EAAU,MAAM;IACdJ,cAAc;EACf,CAFD,EAEG,EAFH;EAGA,IAAAI,gBAAA,EAAU,MAAM;IACd,MAAMC,UAAU,GACd,0BAA0BC,MAAM,CAACC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,KAA3B,CAAD,CADlC;;IAEAP,0BAAA,CAAkBQ,uBAAlB,CAA0CL,UAA1C,EAAuDR,WAAD,IAAiB;MACrEG,cAAc;IACf,CAFD;;IAGAE,0BAAA,CAAkBS,mBAAlB,CAAsCN,UAAtC,EAAkD,CAACO,KAAD,EAAQC,SAAR,KAAsB;MACtEb,cAAc;IACf,CAFD;;IAIA,OAAO,MAAM;MACXE,0BAAA,CAAkBQ,uBAAlB,CAA0CL,UAA1C;;MACAH,0BAAA,CAAkBS,mBAAlB,CAAsCN,UAAtC;IACD,CAHD;EAID,CAdD,EAcG,EAdH;EAeA,oBACE,6BAAC,qBAAD;IACE,GAAG,EAAEV,OADP;IAEE,IAAI,EAAEE,WAFR,CAGE;IAHF;IAIE,mBAAmB,EAAE,MAAMF,OAAO,CAACmB,OAAR,CAAgBC,WAAhB,EAJ7B;IAKE,UAAU,EAAE,QAAc;MAAA,IAAb;QAAEC;MAAF,CAAa;MACxB,oBACE,6BAAC,iBAAD;QAAM,KAAK,EAAEC,MAAM,CAACC;MAApB,gBACE,6BAAC,iBAAD;QAAM,KAAK,EAAED,MAAM,CAACE;MAApB,GACGH,IAAI,CAACI,MAAL,CAAYC,QADf,eAEE,6BAAC,iBAAD;QAAM,KAAK,EAAEJ,MAAM,CAACK;MAApB,QAAoCN,IAAI,CAACO,OAAzC,CAFF,CADF,CADF;IAQD;EAdH,EADF;AAkBD;;AAED,MAAMN,MAAM,GAAGO,uBAAA,CAAWC,MAAX,CAAkB;EAC/BP,gBAAgB,EAAE;IAChBQ,SAAS,EAAE,YADK;IAEhBC,eAAe,EAAE,wBAFD;IAGhBC,YAAY,EAAE,EAHE;IAIhBC,aAAa,EAAE,KAJC;IAKhBC,cAAc,EAAE,YALA;IAMhBC,UAAU,EAAE,QANI;IAOhBC,SAAS,EAAE,CAPK;IAQhBC,UAAU,EAAE,CARI;IAShBC,aAAa,EAAE,CATC;IAUhBC,YAAY,EAAE,EAVE;IAWhBC,WAAW,EAAE;EAXG,CADa;EAc/BjB,SAAS,EAAE;IACTkB,KAAK,EAAE,SADE;IAETC,QAAQ,EAAE,EAFD,CAGT;;EAHS,CAdoB;EAmB/BhB,YAAY,EAAE;IACZe,KAAK,EAAE,OADK;IAEZC,QAAQ,EAAE,EAFE;IAGZC,UAAU,EAAE;EAHA;AAnBiB,CAAlB,CAAf"}