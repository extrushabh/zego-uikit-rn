{"version":3,"names":["React","useEffect","useState","View","StyleSheet","Text","Delegate","AudioFrame","VideoFrame","ZegoUIKitInternal","MaskViewDefault","props","userInfo","userName","styles","defaultMaskContainer","defaultMaskNameLabelContainer","defaultMaskNameLabel","ZegoVideoView","userID","roomID","audioViewBackgroudColor","audioViewBackgroudImage","showSoundWave","useVideoViewAspectFill","foregroundBuilder","setUserInfo","isCameraOn","setIsCameraOn","user","getUser","isCameraDeviceOn","callbackID","String","onSDKConnected","onUserInfoUpdate","info","onRoomStateChanged","reason","errorCode","extendedData","isRoomConnected","container","videoContainer","mask","create","flex","width","height","position","zIndex","backgroundColor","opacity","alignSelf","paddingLeft","paddingRight","paddingBottom","paddingTop","borderRadius","bottom","right","color","fontSize"],"sources":["index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { View, StyleSheet, Text } from \"react-native\";\nimport Delegate from \"react-delegate-component\";\nimport AudioFrame from \"./AudioFrame\";\nimport VideoFrame from \"./VideoFrame\";\nimport ZegoUIKitInternal from \"../../internal/ZegoUIKitInternal\";\n\n\nfunction MaskViewDefault(props) {\n    const { userInfo } = props;\n    const { userName = '' } = userInfo;\n    return (\n        <View style={styles.defaultMaskContainer}>\n            <View style={styles.defaultMaskNameLabelContainer}>\n                <Text style={styles.defaultMaskNameLabel}>{userName}</Text>\n            </View>\n        </View>\n    );\n}\n\nexport default function ZegoVideoView(props) {\n    const {\n        userID,\n        roomID,\n        audioViewBackgroudColor,\n        audioViewBackgroudImage,\n        showSoundWave = true,\n        useVideoViewAspectFill = false,\n        foregroundBuilder\n    } = props;\n\n    const [userInfo, setUserInfo] = useState({});\n    const [isCameraOn, setIsCameraOn] = useState(true);\n\n\n    useEffect(() => {\n        const user = ZegoUIKitInternal.getUser(userID);\n        if (user) {\n            setUserInfo(user);\n            setIsCameraOn(user.isCameraDeviceOn);\n        }\n    }, [])\n\n    useEffect(() => {\n        const callbackID = 'ZegoVideoView' + String(userID);\n\n        ZegoUIKitInternal.onSDKConnected(callbackID, () => {\n            const user = ZegoUIKitInternal.getUser(userID);\n            if (user) {\n                setUserInfo(user);\n                setIsCameraOn(user.isCameraDeviceOn);\n            }\n        });\n        ZegoUIKitInternal.onUserInfoUpdate(callbackID,\n            (info) => {\n                if (info.userID == userID) {\n                    setIsCameraOn(info.isCameraDeviceOn);\n                    setUserInfo(info);\n                }\n            });\n        ZegoUIKitInternal.onRoomStateChanged(callbackID,\n            (reason, errorCode, extendedData) => {\n                if (ZegoUIKitInternal.isRoomConnected()) {\n                    const user = ZegoUIKitInternal.getUser(userID);\n                    if (user) {\n                        setIsCameraOn(user.isCameraDeviceOn);\n                    }\n                }\n            });\n        return () => {\n            ZegoUIKitInternal.onSDKConnected(callbackID);\n            ZegoUIKitInternal.onUserInfoUpdate(callbackID);\n            ZegoUIKitInternal.onRoomStateChanged(callbackID);\n        }\n    }, [])\n    return (\n        <View style={styles.container}>\n            <VideoFrame\n                style={styles.videoContainer}\n                userID={userID}\n                roomID={roomID}\n                fillMode={useVideoViewAspectFill ? 1 : 0} // 1:AspectFill, 0:AspectFit\n            >\n                {!isCameraOn ? <AudioFrame\n                    userInfo={userInfo}\n                    showSoundWave={showSoundWave}\n                    audioViewBackgroudColor={audioViewBackgroudColor}\n                    audioViewBackgroudImage={audioViewBackgroudImage}\n                /> : null}\n            </VideoFrame>\n\n            <Delegate\n                style={styles.mask}\n                to={foregroundBuilder}\n                default={MaskViewDefault}\n                props={{ userInfo }}\n            />\n        </View>\n    );\n}\n\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        width: '100%',\n        height: '100%',\n        position: 'absolute',\n    },\n    videoContainer: {\n        flex: 1,\n        width: '100%',\n        height: '100%',\n        zIndex: 1,\n    },\n    mask: {\n        flex: 1,\n        width: '100%',\n        height: '100%',\n        position: 'absolute',\n        zIndex: 2,\n    },\n    defaultMaskContainer: {\n        flex: 1,\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n    },\n    defaultMaskNameLabelContainer: {\n        flex: 1,\n        backgroundColor: '#2A2A2A',\n        opacity: 0.5,\n        position: 'absolute',\n        alignSelf: 'center',\n        paddingLeft: 5,\n        paddingRight: 5,\n        paddingBottom: 3,\n        paddingTop: 3,\n        borderRadius: 6,\n        bottom: 5,\n        right: 5\n    },\n    defaultMaskNameLabel: {\n        flex: 1,\n        color: '#FFFFFF',\n        fontSize: 12\n    }\n});"],"mappings":"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"}